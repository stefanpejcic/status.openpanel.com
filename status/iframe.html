<!DOCTYPE html>
<html class="bg-transparent dark" lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Status Badge</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { margin: 0; }
  </style>
</head>
<body class="bg-transparent dark">
  <a id="status-badge" href="#" target="_blank"
   class="inline-flex items-center rounded shrink p-1 pr-2 h-[30px]
          bg-white/20 dark:bg-neutral-800/50
          hover:bg-neutral-100/30 dark:hover:bg-neutral-500/70
          transition w-full">
     
    <!-- Status Indicator -->
    <div class="mr-2 inline-block w-[18px] h-[18px] text-center leading-none">
      <svg id="status-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
        <circle cx="9" cy="9" r="9" fill="currentColor" fill-opacity="0.2"></circle>
        <path fill-rule="evenodd" clip-rule="evenodd"
              d="M9 15C10.5913 15 12.1174 14.3679 13.2426 13.2426C14.3679 12.1174 15 10.5913 15 9C15 7.4087 14.3679 5.88258 13.2426 4.75736C12.1174 3.63214 10.5913 3 9 3C7.4087 3 5.88258 3.63214 4.75736 4.75736C3.63214 5.88258 3 7.4087 3 9C3 10.5913 3.63214 12.1174 4.75736 13.2426C5.88258 14.3679 7.4087 15 9 15ZM11.8245 7.50675C11.8779 7.45573 11.9208 7.39469 11.9506 7.32711C11.9805 7.25952 11.9967 7.18673 11.9984 7.11287C12.0001 7.03901 11.9873 6.96554 11.9606 6.89665C11.9339 6.82776 11.8939 6.76481 11.8429 6.71137C11.7919 6.65794 11.7308 6.61508 11.6632 6.58524C11.5956 6.5554 11.5229 6.53917 11.449 6.53746C11.3751 6.53575 11.3017 6.54861 11.2328 6.5753C11.1639 6.60199 11.1009 6.64198 11.0475 6.693C9.91968 7.77061 8.9301 8.98415 8.1015 10.3058L6.96 9.165C6.9085 9.10974 6.8464 9.06541 6.7774 9.03466C6.7084 9.00392 6.63392 8.98739 6.55839 8.98606C6.48286 8.98472 6.40784 8.99862 6.3378 9.02691C6.26776 9.0552 6.20414 9.09731 6.15072 9.15072C6.09731 9.20414 6.0552 9.26776 6.02691 9.3378C5.99862 9.40784 5.98472 9.48286 5.98606 9.55839C5.98739 9.63392 6.00392 9.7084 6.03466 9.7774C6.06541 9.8464 6.10973 9.9085 6.165 9.96L7.815 11.6108C7.8761 11.6719 7.95045 11.7181 8.0323 11.7458C8.11415 11.7736 8.2013 11.7821 8.28696 11.7707C8.37263 11.7593 8.45452 11.7283 8.52629 11.6802C8.59805 11.632 8.65775 11.568 8.70075 11.493C9.54556 10.0214 10.5976 8.67891 11.8245 7.50675Z"
              fill="currentColor"></path>
      </svg>
    </div>

    <!-- Status Text -->
    <div id="status-text" class="font-medium text-neutral-600 dark:text-white text-[14px]">
      Loading status...
    </div>
  </a>

  <script>
    async function updateStatus() {
      try {
        const res = await fetch('status.json');
        const data = await res.json();

        const allOk = data.domains.every(d => d.http_ok && d.ssl_ok && d.whois_ok);

        const badge = document.getElementById('status-badge');
        const icon = document.getElementById('status-icon');
        const text = document.getElementById('status-text');

        if (allOk) {
          icon.className = 'text-statuspage-green inline-block';
          text.textContent = 'All services are online';
        } else {
          icon.className = 'text-statuspage-red inline-block';
          text.textContent = 'Some services are down';
        }

        badge.href = './index.html';
      } catch (err) {
        console.error(err);
        document.getElementById('status-text').textContent = 'Error loading status';
        document.getElementById('status-icon').className = 'text-statuspage-red inline-block';
      }
    }

    updateStatus();
    // Optional: refresh every 30s
    setInterval(updateStatus, 30000);
  </script>
</body>
</html>
